# Universal Personal Knowledge Context System

Transform your personal notes into an intelligent knowledge graph accessible through Claude Desktop via MCP (Model Context Protocol).

## ğŸ¯ What This Does

- **ğŸ“š Processes your Obsidian vault** (or any markdown notes) into a knowledge graph
- **ğŸ§  Uses Microsoft GraphRAG** for advanced entity extraction and relationship mapping
- **ğŸ”— Integrates with Claude Desktop** via MCP tools for intelligent querying
- **ğŸ’¡ Provides contextual insights** that go far beyond simple keyword search

## âœ¨ Features

- **Global Search**: Ask broad questions about themes across your entire knowledge base
- **Local Search**: Find specific information about entities, people, projects, or concepts
- **Relationship Discovery**: Uncover hidden connections between your notes
- **Automatic Updates**: File watching system for continuous processing of new notes
- **Cost Optimized**: Uses GPT-4o-mini and text-embedding-3-small for affordable processing

## ğŸš€ Quick Start

### Prerequisites

- **macOS** (for Claude Desktop integration)
- **Python 3.8+**
- **OpenAI API key** ([Get one here](https://platform.openai.com/api-keys))
- **Claude Desktop** installed
- **Obsidian vault** or folder of markdown notes

### Installation

1. **Clone the repository:**
```bash
git clone https://github.com/fstrauf/universal-knowledge-context.git
cd universal-knowledge-context
```

2. **Set up the environment:**
```bash
python -m venv myenv
source myenv/bin/activate  # On Windows: myenv\Scripts\activate
pip install -r requirements.txt
```

3. **Configure your environment:**
```bash
cp .env.example .env
# Edit .env with your settings (see Configuration section below)
```

4. **Initialize the system:**
```bash
python setup.py
```

5. **Process your notes:**
```bash
python main.py --interactive
```

## âš™ï¸ Configuration

Edit your `.env` file with these settings:

```env
# Your OpenAI API key (required)
GRAPHRAG_API_KEY=sk-your-openai-api-key-here

# Path to your Obsidian vault or notes folder
OBSIDIAN_VAULT_PATH=/path/to/your/obsidian/vault

# Optional: Specific folder within vault (default: entire vault)
# NOTES_SUBFOLDER=notes
```

### Finding Your Obsidian Vault Path

**macOS (iCloud sync):**
```
/Users/yourusername/Library/Mobile Documents/iCloud~md~obsidian/Documents
```

**macOS (local vault):**
```
/Users/yourusername/Documents/ObsidianVault
```

**Windows:**
```
C:\Users\yourusername\Documents\ObsidianVault
```

## ğŸ”§ Usage

### Processing Your Notes

**One-time processing:**
```bash
python main.py
```

**Continuous monitoring (watches for new/changed files):**
```bash
python main.py --monitor
```

**Interactive mode (process + query interface):**
```bash
python main.py --interactive
```

### Claude Desktop Integration

1. **Add to Claude Desktop config:**
   - Open: `~/Library/Application Support/Claude/claude_desktop_config.json`
   - Add the server configuration (generated by setup.py)

2. **Restart Claude Desktop**

3. **Use these tools in Claude:**
   - `search_knowledge_global()` - Broad thematic questions
   - `search_knowledge_local()` - Specific entity searches  
   - `get_knowledge_stats()` - Knowledge base statistics

### Example Queries

**Global searches (themes and patterns):**
- "What are the main themes in my knowledge base?"
- "How do my projects relate to each other?"
- "What insights can you find about my learning journey?"

**Local searches (specific entities):**
- "Tell me about [person/project/concept] in my notes"
- "What connections exist around [topic]?"
- "Find information about my work on [specific project]"

## ğŸ“Š Architecture

```
Your Notes â†’ Obsidian Processor â†’ GraphRAG â†’ Knowledge Graph â†’ MCP Server â†’ Claude Desktop
```

### Components

- **ObsidianProcessor**: Extracts content, metadata, and relationships from markdown files
- **GraphRAGManager**: Handles knowledge graph creation and querying using Microsoft GraphRAG
- **MCP Server**: Provides tools for Claude Desktop integration via FastMCP
- **File Watcher**: Monitors for changes and triggers incremental updates

## ğŸ’° Cost Considerations

Typical costs for processing with OpenAI APIs:
- **Small vault (100 notes)**: ~$1-3
- **Medium vault (500 notes)**: ~$5-15  
- **Large vault (1000+ notes)**: ~$10-30

Costs depend on:
- Number and length of notes
- Complexity of content
- Frequency of updates

## ğŸ” Monitoring Progress

Use the included progress checker:
```bash
./check_progress.sh
```

Or check manually:
```bash
# Check if indexing is running
ps aux | grep "graphrag index"

# View output files
ls -la data/output/

# Watch logs
tail -f graphrag_index.log
```

## ğŸ› Troubleshooting

### Common Issues

**"No such file or directory: python"**
- Solution: Update MCP server config to use full Python path

**"Rate limit exceeded"**
- This is normal for large vaults
- GraphRAG automatically retries
- Consider reducing `concurrent_requests` in `data/settings.yaml`

**"MCP tools not appearing in Claude"**
- Restart Claude Desktop completely
- Check Claude logs: `tail ~/Library/Logs/Claude/mcp*.log`
- Verify server is running: `ps aux | grep mcp_server`

### Getting Help

1. Check the [Issues](https://github.com/yourusername/universal-knowledge-context/issues) page
2. Enable verbose logging: `python main.py --verbose`
3. Share relevant log files when reporting issues

## ğŸ› ï¸ Development

### Project Structure
```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ obsidian_processor.py    # Note processing
â”‚   â”œâ”€â”€ graphrag_manager.py      # GraphRAG integration
â”‚   â”œâ”€â”€ mcp_server.py           # Claude Desktop MCP server
â”‚   â””â”€â”€ file_watcher.py         # File monitoring
â”œâ”€â”€ data/                       # Processing workspace
â”œâ”€â”€ tests/                      # Test files
â””â”€â”€ main.py                     # CLI interface
```

### Running Tests
```bash
python -m pytest tests/
```

### Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## ğŸ“ License

MIT License - see [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- [Microsoft GraphRAG](https://github.com/microsoft/graphrag) for the knowledge graph framework
- [FastMCP](https://github.com/jlowin/fastmcp) for the MCP server implementation
- [Obsidian](https://obsidian.md) for the amazing note-taking platform
- [Claude Desktop](https://claude.ai/desktop) for MCP integration

## ğŸš€ What's Next

- [ ] Support for additional note formats (Notion, Roam, etc.)
- [ ] Web interface for knowledge exploration
- [ ] Advanced visualization tools
- [ ] Community knowledge sharing features

---

**Transform your personal notes into an intelligent knowledge companion today!** ğŸ§ âœ¨ 